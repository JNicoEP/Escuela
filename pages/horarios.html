<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Horarios - Escuela Mariano Ariza</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>

<body>

    <div id="navbar-container"></div>
    <div id="modal-container"></div>

    <main class="container my-5">
        <section>
            <h2 class="text-center mb-4">Horarios de Clases</h2>

            <div class="card card-body">

                <div class="text-center mb-4">
                    <button class="btn btn-primary btn-filter" onclick="mostrarTabla('mañana')">Turno Mañana</button>
                    <button class="btn btn-primary btn-filter" onclick="mostrarTabla('tarde')">Turno Tarde</button>
                    <button class="btn btn-secondary btn-filter" onclick="mostrarTabla('todos')">Mostrar Todos</button>
                </div>

                <div class="row">
                    <div class="col-md-6 tabla-turno" id="tablaManana">
                        <div class="table-responsive">
                            <table class="table horarios-table-professional">
                                <thead>
                                    <tr>
                                        <th>Turno Mañana</th>
                                        <th>Hora</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>ENTRADA - IZAMIENTO</td>
                                        <td>8:00 A 8:15</td>
                                    </tr>
                                    <tr>
                                        <td>1° Hora</td>
                                        <td>8:15 A 9:00</td>
                                    </tr>
                                    <tr>
                                        <td>2° Hora</td>
                                        <td>9:00 A 9:40</td>
                                    </tr>
                                    <tr>
                                        <td>RECREO</td>
                                        <td>9:40 A 9:50</td>
                                    </tr>
                                    <tr>
                                        <td>3° Hora</td>
                                        <td>9:50 A 10:30</td>
                                    </tr>
                                    <tr>
                                        <td>4° Hora</td>
                                        <td>10:30 A 11:10</td>
                                    </tr>
                                    <tr>
                                        <td>RECREO</td>
                                        <td>11:10 A 11:20</td>
                                    </tr>
                                    <tr>
                                        <td>5° Hora</td>
                                        <td>11:20 A 12:00</td>
                                    </tr>
                                    <tr>
                                        <td>RECREACIÓN</td>
                                        <td>12:00 A 13:00</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="col-md-6 tabla-turno" id="tablaTarde">
                        <div class="table-responsive">
                            <table class="table horarios-table-professional">
                                <thead>
                                    <tr>
                                        <th>Turno Tarde</th>
                                        <th>Hora</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td>ENTRADA - IZAMIENTO</td>
                                        <td>13:00 A 13:40</td>
                                    </tr>
                                    <tr>
                                        <td>6° Hora</td>
                                        <td>13:40 A 14:20</td>
                                    </tr>
                                    <tr>
                                        <td>RECREO</td>
                                        <td>14:20 A 14:30</td>
                                    </tr>
                                    <tr>
                                        <td>7° Hora</td>
                                        <td>14:30 A 15:10</td>
                                    </tr>
                                    <tr>
                                        <td>8° Hora</td>
                                        <td>15:10 A 15:50</td>
                                    </tr>
                                    <tr>
                                        <td>9° Hora</td>
                                        <td>15:10 A 15:50</td>
                                    </tr>
                                    <tr>
                                        <td>ARRIMIENTO Y DESCONCENTRACIÓN</td>
                                        <td>15:50 A 16:00</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-4">
                    <button class="btn btn-success btn-export" onclick="exportarAPDF()">
                        <i class="fas fa-download"></i> Exportar a PDF
                    </button>
                </div>

            </div>
        </section>
    </main>

    <div id="footer-container"></div>

    <script type="module" src="/src/js/main.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>

    <script>
        // Función para mostrar u ocultar las tablas
        function mostrarTabla(turno) {
            const tablaManana = document.getElementById("tablaManana");
            const tablaTarde = document.getElementById("tablaTarde");

            if (turno === 'mañana') {
                tablaManana.style.display = "block";
                tablaTarde.style.display = "none";
            } else if (turno === 'tarde') {
                tablaManana.style.display = "none";
                tablaTarde.style.display = "block";
            } else if (turno === 'todos') {
                tablaManana.style.display = "block";
                tablaTarde.style.display = "block";
            }
        }
        mostrarTabla('todos');

        // Función para exportar a PDF
        function exportarAPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            doc.setFontSize(18);
            doc.text("Horarios Escolares - Escuela Mariano Ariza", 10, 10);

            // Obtener las tablas (ahora busca la nueva clase)
            const tablaManana = document.querySelector("#tablaManana .horarios-table-professional");
            const tablaTarde = document.querySelector("#tablaTarde .horarios-table-professional");

            // Convertir las tablas a arrays de datos
            const datosManana = [];
            const filasManana = tablaManana.querySelectorAll("tr");
            filasManana.forEach(fila => {
                const celdas = fila.querySelectorAll("th, td");
                const filaDatos = [];
                celdas.forEach(celda => {
                    filaDatos.push(celda.textContent.trim());
                });
                datosManana.push(filaDatos);
            });

            const datosTarde = [];
            const filasTarde = tablaTarde.querySelectorAll("tr");
            filasTarde.forEach(fila => {
                const celdas = fila.querySelectorAll("th, td");
                const filaDatos = [];
                celdas.forEach(celda => {
                    filaDatos.push(celda.textContent.trim());
                });
                datosTarde.push(filaDatos);
            });

            // Generar el PDF
            doc.autoTable({
                head: [datosManana[0]],
                body: datosManana.slice(1),
                startY: 20,
            });

            doc.autoTable({
                head: [datosTarde[0]],
                body: datosTarde.slice(1),
                startY: doc.lastAutoTable.finalY + 10,
            });

            doc.save("horarios_escolares.pdf");
        }
        // Función para mostrar u ocultar las tablas con animación
        function mostrarTabla(turno) {
            const tablaManana = document.getElementById("tablaManana");
            const tablaTarde = document.getElementById("tablaTarde");

            if (turno === 'mañana') {
                tablaManana.classList.add("active");
                tablaTarde.classList.remove("active");
            } else if (turno === 'tarde') {
                tablaManana.classList.remove("active");
                tablaTarde.classList.add("active");
            } else if (turno === 'todos') {
                tablaManana.classList.add("active");
                tablaTarde.classList.add("active");
            }
        }

        // Mostrar ambas tablas al cargar (con un pequeño retraso para la animación)
        setTimeout(() => {
            mostrarTabla('todos');
        }, 1000); // 1000ms de espera
    </script>
</body>

</html>